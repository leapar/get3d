webpackJsonp([10],{"63fr":function(t,e,i){var n=i("fdI5");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);i("rjj0")("ecd048ba",n,!0)},"7TnQ":function(t,e,i){var n=i("Wcyc");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);i("rjj0")("418d94c7",n,!0)},"91ZT":function(t,e,i){"use strict";(function(t,n){var r=i("T2SK"),s=(i.n(r),i("d4mZ")),o=(i.n(s),i("rxKx"));i.n(o);t("head").append('<script src="../../static/js/crypto/core.js"><\/script>'),t("head").append('<script src="../../static/js/crypto/enc-base64.js"><\/script>'),t("head").append('<script src="../../static/js/crypto/cipher-core.js"><\/script>'),t("head").append('<script src="../../static/js/crypto/pad-zeropadding.js"><\/script>'),t("head").append('<script src="../../static/js/crypto/md5.js"><\/script>'),t("head").append('<script src="../../static/js/crypto/aes.js"><\/script>'),t("head").append('<script src="../../static/js/crypto/mode-ecb.js"><\/script>'),t("head").append('<script src="../../static/js/threejs/t94/three.js"><\/script>'),t("head").append('<script src="../../static/js/threejs/t94/lights/RectAreaLightUniformsLib.js"><\/script>'),t("head").append('<script src="../../static/js/threejs/t94/loaders/GLTFLoader.js"><\/script>'),t("head").append('<script src="../../static/js/jq.fullscreen.js"><\/script>'),t("head").append('<script src="../../static/js/threejs/t94/controls/OrbitControls.js?v=1"><\/script>'),t("head").append('<script src="../../static/js/threejs/t94/controls/DragControls.js"><\/script>'),t("head").append('<script src="../../static/js/threejs/t94/loaders/DRACOLoader.js"><\/script>'),e.a={created:function(){function e(t){t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullScreen&&t.webkitRequestFullScreen()}function i(){return document.fullscreen||document.mozFullScreen||document.webkitIsFullScreen||!1}function n(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen()}function r(e){t(document).on("fullscreenchange mozfullscreenchange webkitfullscreenchange",function(){e(i())})}t.support.fullscreen=function(){var t=document.documentElement;return"requestFullscreen"in t||"mozRequestFullScreen"in t&&document.mozFullScreenEnabled||"webkitRequestFullScreen"in t}(),t.fn.getfullScreenStatus=function(){return i()},t.fn.fullScreen=function(s){if(!t.support.fullscreen||1!==this.length)return this;if(i())return n(),this;var o=t.extend({background:"#111",callback:t.noop(),fullscreenClass:"fullScreen"},s),a=this,c=t("<div>",{css:{overflow:"hidden",background:o.background,width:"100%",height:"100%"}}).insertBefore(a).append(a);return a.addClass(o.fullscreenClass),e(c.get(0)),c.click(function(t){t.target==this&&n()}),a.cancel=function(){return n(),a},r(function(e){e||(t(document).off("fullscreenchange mozfullscreenchange webkitfullscreenchange"),a.removeClass(o.fullscreenClass).insertBefore(c),c.remove()),o.callback&&o.callback(e)}),a},t.fn.cancelFullScreen=function(){return n(),this}},mounted:function(){if(n.tools.isDesktop()||t(".viewer").css({borderRadius:"0px"}),!this.$route.query.mid||24!=this.$route.query.mid.length)return console.log("mid error"),!1;var e=this,i=!1;this.$route.query.transparent&&(t(document.body).attr("style","background-color:transparent;"),i=!0);var r=!0;e.$route.query.hidebackimg&&(r=!1);var s=!0;e.$route.query.notpan&&(s=!1);var o=!0;e.$route.query.hidetools&&(o=!1),n.model.getGltf({mid:this.$route.query.mid,aid:this.$route.query.aid},function(t){window.document.title=t.result.name,n.webgl.viewer(e.$refs.viewer,{thbnl:t.result.thbnl,rsPath:t.result.path,gltfObj:t.result.gltf,objSize:t.result.size,setting:t.result.config,insDate:t.result.insdt,selfRotate:e.$route.query.rotate||void 0,showBgImg:r,allowPan:s,showTools:o,transparent:i,mid:e.$route.query.mid,owner:t.result.owner,version:t.result.version})})}}}).call(e,i("7t+N"),i("rpTd"))},T2SK:function(t,e,i){(function(t,e){t.webgl={viewer:function(i,n){if(!t.tools.webglSupport()){var r=function(){/*<div class="noWebGL" style="text-align: center;background: #888;color: white;height: 100%;">
                                    <p style="">不支持WebGL</p>
                                    <a target=_parent href="/router/user/commonProblem">查看更多</a>
                                </div>*/}.toString().match(/[^]*\/\*([^]*)\*\/}$/)[1];return e(i).html(r),!1}var s,o,a,c,l,u,h,p,d,f,v,m,g,w,y,T,E=i,b=t.var.storeHost,
                                
                                
                                
                                
                                x=b+(n.thbnl||"asset/bg_black_point.jpg?"),C=n.rsPath,R=n.gltfObj,S=n.cameraNear||.01,_=n.cameraFar||1e4,z=n.setting||void 0,H=!0,k=void 0,M=[],P={x:0,y:5,z:20},j=[],B=void 0==n.showTools||n.showTools,I=void 0==n.allowPan||n.allowPan,A=void 0!=n.selfRotate&&n.selfRotate,F=void 0!=n.showBgImg&&n.showBgImg,D=(void 0!=n.transparent&&n.transparent,void 0!=n.minDistance?n.minDistance:.1),L=void 0!=n.maxDistance?n.maxDistance:1e3,O=void 0!=n.rotateXYZ?n.rotateXYZ:"z",q=void 0,W=n.objSize||void 0,N=void 0,X=void 0,Y=void 0,V=Date.parse(n.insDate)<Date.parse("2018/03/20"),U=new Array,G=new Array,$=!0,Z=!0,K=n.mid,J=n.owner||!1,Q=n.version||void 0,tt=0,et=void 0,it=void 0,nt=void 0,rt=function(){if(void 0!=it&&void 0==nt&&ht){var t=new THREE.Vector3;t.x=event.offsetX/e(o).width()*2-1,t.y=-event.offsetY/e(o).height()*2+1,t.z=.5,t.unproject(l);var i=(new THREE.Vector3).copy(l.position),n=(new THREE.Vector3).copy(t.sub(l.position)).normalize(),r=new THREE.Raycaster(i,n),s=r.intersectObjects(Dt);if(s.length>0){a.worldToLocal(s[0].point),a.remove(et);var c=new THREE.Geometry,u=new THREE.LineBasicMaterial({color:16777215,transparent:!0,depthTest:!1,depthWrite:!1});c.vertices.push(it),c.vertices.push(s[0].point),et=new THREE.Line(c,u),a.add(et),Nt()}}},st=function(t){e(t.object.panel).show(),ct=t.object.cameraPoz,at=l,lt=0},ot=function(t,e){u.clear(),g.material.uniforms.resolution.value.set(t,e),u.setSize(t,e),H?(l.aspect=t/e,T=t/e,k.left=y*T/-2,k.right=y*T/2,k.top=y/2,k.bottom=y/-2,l.updateProjectionMatrix(),f.updateMatrix(),u.render(v,f),u.render(h,l)):(k.aspect=t/e,T=t/e,k.left=y*T/-2,k.right=y*T/2,k.top=y/2,k.bottom=y/-2,k.updateProjectionMatrix(),f.updateMatrix(),u.render(v,f),u.render(h,k))},at=l,ct=void 0,lt=0,ut=!1,ht=!1,pt=function(){void 0!=ct&&(lt<=1?(ut||($=!0,ut=!0,requestAnimationFrame(Nt)),c.enabled=!1,lt+=(Math.abs(.2/(ct.x-at.position.x))+Math.abs(.2/(ct.y-at.position.y))+Math.abs(.2/(ct.z-at.position.z)))/3*.025,at.position.x+=(ct.x-at.position.x)*(lt>1?1:lt),at.position.y+=(ct.y-at.position.y)*(lt>1?1:lt),at.position.z+=(ct.z-at.position.z)*(lt>1?1:lt)):(c.enabled=!0,lt=0,ct=void 0,ut=!1,$=!1))},dt=function(){Z=!0,ft(),$||($=!0,Nt())},ft=function(){at=H?l:k,ct=P,c.target.copy({x:0,y:0,z:0})},vt=function(){e(this).parent().hasClass("viewerShowWireFrameClick")?(mt(!1),e(this).parent().removeClass("viewerShowWireFrameClick")):(mt(!0),e(this).parent().addClass("viewerShowWireFrameClick")),$||Nt()},mt=(new Array,function(t){for(var e=new THREE.LineBasicMaterial({color:16777215,linewidth:1}),i=0;i<a.children.length;i++){var n=a.children[i];if("Mesh"==n.type)if(n.material.visible=!t,t){if(!n.wf){var r=new THREE.WireframeGeometry(n.geometry),s=new THREE.LineSegments(r,e);n.add(s),n.wf=s}n.wf.visible=!0}else!t&&n.wf&&(n.wf.visible=!1)}}),gt=function(){e(this).parent().hasClass("viewerFunBtnClick")?(Ot(!1),e(this).parent().removeClass("viewerFunBtnClick")):(Ot(!0),e(this).parent().addClass("viewerFunBtnClick"))},wt=function(){Tt(!0),d.visible=!1,$||Nt()},yt=function(){Tt(!1),d.visible=!0,$||Nt()},Tt=function(t){for(var e=0;e<j.length;e++){j[e].visible=t}},Et=function(){t.tools.isDesktop()&&e(E).fullScreen()},it=void 0,nt=void 0,bt=void 0,xt=void 0,Ct=function(t){if(ht){var i=new THREE.Vector3;i.x=t.offsetX/e(o).width()*2-1,i.y=-t.offsetY/e(o).height()*2+1,i.z=.5,i.unproject(l);var n=(new THREE.Vector3).copy(l.position),r=(new THREE.Vector3).copy(i.sub(l.position)).normalize(),s=new THREE.Raycaster(n,r),c=s.intersectObjects(Dt);c.length>0&&(a.worldToLocal(c[0].point),void 0==it&&void 0==nt?(bt=Pt("",c[0].point),it=c[0].point):void 0!=it&&void 0==nt&&(xt=Pt("",c[0].point),nt=c[0].point,Bt(bt,xt),it=void 0,nt=void 0,bt=void 0,xt=void 0,a.remove(et),e(".addDistance").html("添加尺寸")))}else ft()},Rt=function(){e(s).width(e(E).width()),e(s).height(e(E).height()),e(o).width(e(E).width()),e(o).height(e(E).height()),g&&F&&g.material.uniforms.resolution.value.set(e(o).width(),e(o).height()),u.setSize(e(o).width(),e(o).height()),l.aspect=e(o).width()/e(o).height(),T=e(o).width()/e(o).height(),k.left=y*T/-2,k.right=y*T/2,k.top=y/2,k.bottom=y/-2,g&&F&&(f.aspect=e(o).width()/e(o).height()),l.updateProjectionMatrix(),k.updateProjectionMatrix(),g&&F&&f.updateMatrix(),e(".get3d_viewer_progress").css("top",e(o).height()/2-e(".get3d_viewer_progress").height()/2),e(".get3d_viewer_progress").css("left",e(o).width()/2-e(".get3d_viewer_progress").width()/2),$||Nt()},St=0,_t={total:{size:0,urls:{}},loaded:{size:0}},zt=function t(e){if("Mesh"==e.type)e.geometry.computeBoundingBox();else if(e.children.length>0)for(var i=0;i<e.children.length;i++)t(e.children[i])},Ht=new Array,kt=new Array,Mt="mm",Pt=function(t,e){var i=At(t),n=new THREE.SpriteMaterial({map:i,transparent:!0,depthTest:!1,depthWrite:!1}),r=new THREE.Sprite(n);return r.position.set(e.x,e.y,e.z),a.add(r),Ht.push(r),r},jt=function(){for(var t=0;t<kt.length;t++){var e=kt[t];e.parent.visible=ht,e.parent.spriteA.visible=ht,e.parent.spriteB.visible=ht}},Bt=function(t,e){var i=new THREE.LineBasicMaterial({color:16777215,transparent:!0,depthTest:!1,depthWrite:!1}),n=new THREE.Geometry;n.vertices.push(t.position),n.vertices.push(e.position);var r=new THREE.Line(n,i);r.spriteA=t,r.spriteB=e,a.add(r);var s=t.position.distanceTo(e.position)/tt;It(s.toFixed(2)+Mt,r)},It=function(t,e){e.geometry.computeBoundingSphere();var i=Ft(t),n=new THREE.SpriteMaterial({map:i,transparent:!0,depthTest:!1,depthWrite:!1}),r=new THREE.Sprite(n),s=e.geometry.boundingSphere.center.x,o=e.geometry.boundingSphere.center.y,a=e.geometry.boundingSphere.center.z;r.position.set(s,o,a),e.add(r),kt.push(r)},At=function(t){var i=document.createElement("canvas");e(i).attr("width","64px"),e(i).attr("height","64px");var n=i.getContext("2d"),r=2*Math.PI;return n.fillStyle="rgb(255, 0, 0)",n.beginPath(),n.arc(32,32,7.5,0,r),n.fill(),n.strokeStyle="rgb(255, 255, 255)",n.lineWidth=3,n.beginPath(),n.arc(32,32,7.5,0,r),n.stroke(),n.fillStyle="rgb(255, 255, 255)",n.font="32px sans-serif",n.textAlign="center",n.textBaseline="middle",n.fillText(t,32,32),new THREE.CanvasTexture(i)},Ft=function(t){var i=30*t.length,n=document.createElement("canvas");e(n).attr("width",i+"px"),e(n).attr("height",i+"px");var r=n.getContext("2d");return r.fillStyle="rgb(0, 0, 0)",r.beginPath(),r.rect(0,i/4,i,i/2),r.fill(),r.strokeStyle="rgb(255, 255, 255)",r.beginPath(),r.rect(0,i/4,i,i/2),r.stroke(),r.fillStyle="rgb(255, 255, 255)",r.font="45px sans-serif",r.textAlign="center",r.textBaseline="middle",r.fillText(t,i/2,i/2),new THREE.CanvasTexture(n)},Dt=new Array,Lt=function t(e,i){if(e.children&&e.children.length>0)for(var n=0;n<e.children.length;n++){var r=e.children[n];if("Mesh"==r.type){var s=(new THREE.Geometry).fromBufferGeometry(r.geometry);s.mergeVertices(),s.computeFaceNormals(),s.computeVertexNormals();var o=new THREE.Mesh((new THREE.BufferGeometry).fromGeometry(s),r.material);o.geometry.translate(_offset.x,_offset.y,_offset.z),o.scale.x=o.scale.y=o.scale.z=_scle,o.material.envMap=X,o.material.roughness=1,o.material.map&&(o.material.map.minFilter=o.material.map.magFilter=THREE.LinearFilter),o.material.side=THREE.DoubleSide,o.castShadow=!0,o.baseMtl=o.material,o.normalMtl=i,o.calcV3Color=!1,o.receiveShadow=!0,o.material.needsUpdate=!0,a.add(o),Dt.push(o)}else t(r,i)}},Ot=function(t){for(var e=0;e<a.children.length;e++){var i=a.children[e];if("Mesh"==i.type)if(t){if(!i.calcV3Color){for(var n=new Uint8Array(3*i.geometry.attributes.position.count),r=0,s=3*i.geometry.attributes.position.count;r<s;r+=3)n[r]=128*(i.geometry.attributes.normal.array[r+1]+1),n[r+1]=128*(i.geometry.attributes.normal.array[r+2]+1),n[r+2]=128*(i.geometry.attributes.normal.array[r]+1);i.geometry.addAttribute("color",new THREE.BufferAttribute(n,3,!0)),i.calcV3Color=!0}i.material=i.normalMtl}else i.material=i.baseMtl}$||Nt()},qt=function(){var t=N;if(tt=t.distRate?t.distRate:0,Mt=t.distUnit,t.distLine&&t.distLine.length>0)for(var i=0;i<t.distLine.length;i++){var n=t.distLine[i],r=Pt("",n.a),s=Pt("",n.b);Bt(r,s)}if(t.grpMtix&&a.applyMatrix(t.grpMtix),t.cameraMtix&&(l.applyMatrix(t.cameraMtix),P=l.position.clone()),t.ctrlTgt&&c.target.copy(t.ctrlTgt),t.lights&&t.lights.length>0)for(var o=new THREE.ObjectLoader,u=0;u<t.lights.length;u++){var p=o.parse(t.lights[u]);h.add(p),j.push(p)}else yt();if(t.grpTips&&t.grpTips.length>0)for(var d=0;d<t.grpTips.length;d++){var f=t.grpTips[d];$t(f.num,f.title,f.text,f.tipPoz,f.cameraPoz)}e(".annotation").hide()},Wt=function(t){e(".viewerCanvas").css("background","url("+t+") no-repeat").css("background-position","center center").css("background-size","cover")},Nt=function t(){$&&requestAnimationFrame(t),A&&("z"==O?a.rotateZ(-1*Math.PI/180):"y"==O?a.rotateY(-1*Math.PI/180):a.rotateX(-1*Math.PI/180)),u.clear(),Zt(M),pt(),c.update(),jt(),F&&u.render(v,f),H?u.render(h,l):u.render(h,k)},Xt=function(t){t.computeBoundingBox();var e=t.boundingBox.max.x,i=t.boundingBox.min.x,n=t.boundingBox.max.y,r=t.boundingBox.min.y,s=n-r,o=e-i;return(o>s?o:s)/2},Yt={total:{size:0,urls:{}},loaded:{size:0}},Vt=function(t){if(void 0===q)return e(".get3d_viewer_progress").hide(),!1;Yt.total.size=q,Yt.total.urls[t.currentTarget.responseURL]=t.loaded;var i=0;for(var n in Yt.total.urls)i+=Yt.total.urls[n];if(i>=Yt.total.size)e(".get3d_viewer_progress").hide(),F||Wt(b+"asset/viewer-bkg/bkgrd_default.jpg");else{var r=i/Yt.total.size*100;e(".get3d_viewer_progress > .progress-bar").width(Math.round(r,2)+"%"),e(".get3d_viewer_progress").show()}},Ut=function(t){e(".get3d_viewer_progress").hide()},Gt=function(t){var i=document.createElement("canvas");e(i).attr("width","64px"),e(i).attr("height","64px");var n=i.getContext("2d"),r=2*Math.PI;return n.fillStyle="rgb(0, 0, 0)",n.beginPath(),n.arc(32,32,30,0,r),n.fill(),n.strokeStyle="rgb(255, 255, 255)",n.lineWidth=3,n.beginPath(),n.arc(32,32,30,0,r),n.stroke(),n.fillStyle="rgb(255, 255, 255)",n.font="32px sans-serif",n.textAlign="center",n.textBaseline="middle",n.fillText(t,32,32),new THREE.CanvasTexture(i)},$t=function(t,i,n,r,s){var o=Gt(t),c=new THREE.SpriteMaterial({map:o,transparent:!0,depthTest:!1,depthWrite:!1}),u=document.createElement("div");e(u).attr("class","annotation").html("<p class='t'><strong>"+i+"</strong></p><p class='c'>"+n+"</p>"),e(E).append(u);var h=new THREE.Sprite(c);h.position.set(r.x,r.y,r.z),a.add(h),h.panel=u,h.num=t,h.title=i,h.text=n,h.cameraPoz=s||l.position.clone(),e(u).show(),M.push(h),Zt(M)},Zt=function(i){for(var n=0;n<i.length;n++){var r=i[n];r.visible=Z,r.material.opacity=l.position.distanceTo(r.getWorldPosition())>l.position.distanceTo(a.position)?.25:1,e(r.panel)[0].style.opacity=r.material.opacity;var c=t.tools.vecToScreen(r.getWorldPosition().x,r.getWorldPosition().y,r.getWorldPosition().z,l,e(o).width(),e(o).height(),parseInt(e(s).css("padding-left")),parseInt(e(s).css("padding-top")));e(r.panel)[0].style.top=c.y+"px",e(r.panel)[0].style.left=c.x+"px";var u=.015*r.position.distanceTo(l.position);
                                r.material.opacity=l.position.distanceTo(r.getWorldPosition())>l.position.distanceTo(a.position)?.25:1,
                                r.scale.set(u,u,u)
                            }
                        };!function(){var i=function(){/*<style>
                .viewerShowWireFrameClick,.viewerFunBtnClick{
                    background-color: #449d44;
                }
                .thbnlShow{
                    display:none;
                    position: absolute;
                    top:50px;
                    left: 10px;
                    border: 1px solid #888;
                }
                .cameraBtn{
                    position: absolute;
                    top:10px;
                    left: 10px;
                    color: white;
                    display:none;
                    background-color: #000000;
                    width: 100px;
                    text-align: center;
                    line-height: 30px;
                    border: 1px solid #888;
                    z-index: 11;
                    border-radius: 4px;
                    margin-bottom: 0;
                    cursor: pointer;
                    webkit-user-select:none;
                    -moz-user-select:none;
                    -ms-user-select:none;
                    user-select:none;
                }
                .cameraCover{
                    position: absolute;
                    top:0;
                    left: 0;
                    width: 100%;
                    height:100%;
                    background-color: white;
                    opacity: 1;
                    display: none;
                    z-index: 10;
                }
             </style>
             <script id="vs" type="x-shader/x-vertex">
                      attribute vec3 position;
                      attribute vec2 uv;

                      varying vec2 vUv;

                      void main(void) {
                        vUv = uv;
                        gl_Position = vec4(position, 1.0);
                      }
             </script>
             <script id="fs" type="x-shader/x-fragment">
                      precision highp float;
                      uniform vec2 resolution;
                      uniform vec2 imageResolution;
                      uniform sampler2D texture;
                      varying vec2 vUv;
                      void main(void) {
                        vec2 ratio = vec2(
                            min((resolution.x / resolution.y) / (imageResolution.x / imageResolution.y), 1.0),
                            min((resolution.y / resolution.x) / (imageResolution.y / imageResolution.x), 1.0)
                          );

                        vec2 uv = vec2(
                            vUv.x * ratio.x + (1.0 - ratio.x) * 0.5,
                            vUv.y * ratio.y + (1.0 - ratio.y) * 0.5
                          );
                        gl_FragColor = texture2D(texture, uv);
                      }
             </script>
             <div class="viewerDom" style="width: 100%; height: 100%;">
                 <div class="get3d_viewer_texture_progress" style="background-color:#ffffff;height:6px;font-size: 12px; width: 100%; position: absolute;display:none; margin:0px;left:0;top:0;">
                    <div class="progress-bar progress-bar-striped active"  role="progressbar" aria-valuenow="45" aria-valuemin="0" aria-valuemax="100" ></div>
                 </div>
                 <div class="cameraBtn">
                    <p class="glyphicon glyphicon-camera"></p>
                    <lable>截取封面</lable>
                 </div>
                 <div class="thbnlShow"><img class="thbnlPhoto" /></div>
                 <div class="cameraCover"></div>
                 <canvas id="viewerCanvas" class="viewerCanvas" style="width: 100%; height: 100%;"></canvas>
                 <div class="get3d_viewer_progress" style="background-color:#ffffff;height:10px;font-size: 12px; width: 50%; position: absolute; margin:0px;display:none;">
                    <div class="progress-bar progress-bar-striped active" role="progressbar" aria-valuenow="45" aria-valuemin="0" aria-valuemax="100" ></div>
                 </div>
                 <div class="viewerCtrl" style="padding: 10px;line-height:0px;font-size: 12px; min-width: 150px; position: absolute; bottom: 0px; right: 0px;" >
                     <button style="float:right;" class="fullScreenBtn btn btn-primary btn-xs" type="button">全屏</button>

                     <div class="btn-group dropup" style="float:right;margin-right:10px;">
                         <button class="btn btn-success btn-xs dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            效果
                         </button>
                         <ul class="dropdown-menu dropdown-menu-right" style="min-width:1px;">

                            <li><a href="javascript:" class="userLit">灯效</a></li>
                            <li><a href="javascript:" class="baseLit">基色</a></li>
                            <li role="separator" class="divider"></li>
                            <li><a href="javascript:" class="showNormal">法线</a></li>
                            <li><a href="javascript:" class="wireFrame">线框</a></li>
                         </ul>
                     </div>
                     <div class="btn-group dropup" style="float:right;margin-right:10px;">
                         <button class="btn btn-info btn-xs dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            显示
                         </button>
                         <ul class="dropdown-menu dropdown-menu-right" style="min-width:1px;">
                            <li><a href="javascript:" class="orthgrpCmr">正射</a></li>
                            <li><a href="javascript:" class="centerView">复位</a></li>
                            <li style=""><a href="javascript:" class="switchTage">标注</a></li>
                            <li><a href="javascript:" class="distSize">尺寸</a></li>
                         </ul>
                     </div>
                 </div>
             </div>*/}.toString().match(/[^]*\/\*([^]*)\*\/}$/)[1];e(E).html(i),s=e(".viewerDom"),o=e(".viewerCanvas"),e(".cameraBtn").click(function(){if(e(".cameraBtn").hasClass("action"))return!1;e(".cameraBtn>lable").text("正在上传..."),ot(960,540);var i=t.tools.canvasToImage(e(o).get(0));t.model.get_upload_thbnl_signature(K,function(n){var r=i.src;r=r.split(",")[1],r=window.atob(r);for(var s=new Uint8Array(r.length),a=0;a<r.length;a++)s[a]=r.charCodeAt(a);var c=new Blob([s],{type:"image/jpe"});n.result.file=c,n.result.key=n.result.dir+"tbnl.jpg",t.api.upload(n.result.host,n.result,function(t){if(ot(e(E).width(),e(E).height()),t.success){var i=e(o).width()/3,n=.5625*i;e(".thbnlPhoto").attr("src",t.result.callBackUrl).css({width:i,height:n}),e(".thbnlShow").show(),setTimeout(function(){e(".thbnlShow").hide(),e(".cameraBtn").removeClass("action"),e(".cameraBtn>lable").text("截取封面")},3e3)}else e(".cameraBtn").removeClass("action"),e(".cameraBtn>lable").text("截取封面")},function(){ot(e(E).width(),e(E).height()),e(".cameraBtn").removeClass("action"),e(".cameraBtn>lable").text("截取封面")})}),e(".cameraBtn").addClass("action"),e(".cameraCover").show();var n=1,r=setInterval(function(){n-=.0075,e(".cameraCover").css("opacity",n),n<=0&&(setTimeout(function(){e(".cameraBtn").removeClass("action")},1e3),e(".cameraCover").hide(),e(".cameraCover").css("opacity","0"),clearInterval(r))},10)}),e(".fullScreenBtn").click(Et),e(".baseLit").click(yt),e(".userLit").click(wt),o.mousedown(function(){e(this).css("cursor","-webkit-grabbing"),e(".cameraBtn").hide()}).mouseup(function(){e(this).css("cursor","-webkit-grab"),e(".cameraBtn").hasClass("isShow")&&J&&setTimeout(function(){e(".cameraBtn").show()},1e3)}).css("cursor","-webkit-grab"),o.mouseenter(function(){e(".cameraBtn").hasClass("isShow")&&J&&(e(".cameraBtn").show(),e(".cameraBtn").addClass("mouseover"))}).mouseleave(function(){e(".cameraBtn").removeClass("mouseover"),setTimeout(function(){e(".cameraBtn").hasClass("mouseover")||e(".cameraBtn").hide()},1e3)}),e(".cameraBtn").mouseover(function(){e(".cameraBtn").addClass("mouseover")}).mouseleave(function(){e(".cameraBtn").removeClass("mouseover")}),e(".switchTage").click(function(){Z=!Z,$||Nt()}),e(".showNormal").click(gt),e(".wireFrame").click(vt),e(".centerView").click(dt),t.tools.isDesktop()||(B=!1),e(".orthgrpCmr").click(function(){H=!H,H?(l.position.copy(k.position),c.object=l,e(this).removeClass("viewerFunBtnClick")):(e(this).addClass("viewerFunBtnClick"),k.position.copy(l.position),k.position.z=10,c.object=k),Nt()}),e(".distSize").click(function(){if(tt<=0)return t.app.notify("success","无测量数据"),!1;ht=!ht,ht?(t.app.notify("success","双击模型可进行测量!"),e(this).addClass("viewerFunBtnClick")):e(this).removeClass("viewerFunBtnClick"),Nt()}),B||e(".viewerCtrl").hide(),x&&e(".viewerCanvas").css("background","url("+x+"/blur,r_10,s_10) no-repeat").css("background-position","center center").css("background-size","cover")}(),function(){if(z&&(N=JSON.parse(z)),q=W.fast,window.THREE=THREE,initExporter(), h=new THREE.Scene,window.gscene.push(h),y=17,T=window.innerWidth/window.innerHeight,l=new THREE.PerspectiveCamera(45,window.innerWidth/window.innerHeight,S,_),k=new THREE.OrthographicCamera(y*T/-2,y*T/2,y/2,y/-2,S,_),h.add(k),h.add(l),u=new THREE.WebGLRenderer({canvas:o[0],antialias:!0,preserveDrawingBuffer:!1,alpha:!0}),u.gammaOutput=!0,u.setPixelRatio(window.devicePixelRatio),u.autoClear=!1,u.shadowMap.enabled=!0,u.shadowMap.type=THREE.PCFSoftShadowMap,u.shadowMapSoft=!0,N&&N.envmapShow&&N.envmap){var i=new THREE.TextureLoader;X=i.load(b+N.envmap),X.mapping=THREE.SphericalReflectionMapping}var n;n=N&&N.bgImg&&""!=N.bgImg?N.bgImg:"asset/viewer-bkg/bg06.jpg",F&&(v=new THREE.Scene,window.gscene.push(v),f=new THREE.Camera,w=new THREE.TextureLoader,w.load(b+n,function(t){t.magFilter=THREE.NearestFilter,t.minFilter=THREE.NearestFilter,m=t,g=new THREE.Mesh(new THREE.PlaneBufferGeometry(2,2),new THREE.RawShaderMaterial({uniforms:{resolution:{type:"v2",value:new THREE.Vector2(e(o).width(),e(o).height())},imageResolution:{type:"v2",value:new THREE.Vector2(m.image.width,m.image.height)},texture:{type:"t",value:m}},vertexShader:document.getElementById("vs").textContent,fragmentShader:document.getElementById("fs").textContent})),g.position.x=0,g.position.y=0,g.position.z=0,g.material.depthTest=!1,g.material.depthWrite=!1,v.add(f),v.add(g)})),d=new THREE.AmbientLight(new THREE.Color("#ffffff"),1.2),d.visible=!1,h.add(d),c=new THREE.OrbitControls(l,u.domElement),c.enablePan=I,c.minDistance=D,c.maxDistance=L,c.addEventListener("start",function(){e(".annotation").hide(),e(".cameraBtn").hide(),$||($=!0,Nt())}),c.addEventListener("end",function(){e(".cameraBtn").hasClass("isShow")&&J&&setTimeout(function(){e(".cameraBtn").show()},1e3),$&&!A&&($=!1)}),a=new THREE.Group,h.add(a),l.target=a,k.target=a,p=new THREE.GridHelper(15,15),p.position.x=0,p.position.y=0,p.position.z=0,p.material.opacity=1,p.material.transparent=!1,p.visible=!1,h.add(p),u.domElement.addEventListener("dblclick",Ct,!1),u.domElement.addEventListener("mousemove",rt,!1);var r=new Hammer.Manager(u.domElement);r.add(new Hammer.Tap({event:"doubletap",taps:2})),r.on("doubletap ",function(t){ht||dt()});var s=new THREE.DragControls(M,l,u.domElement);s.enabled=!1,s.addEventListener("click",function(t){st(t)}),t.tools.isDesktop()||s.addEventListener("tap",function(t){st(t)}),Rt(),window.addEventListener("resize",Rt)}(),function(){var i=new THREE.GLTFLoader;i.setPath(C),"v3"==Q&&(THREE.DRACOLoader.setDecoderPath("../../static/js/threejs/t94/libs/draco/gltf/"),i.setDRACOLoader(new THREE.DRACOLoader)),i.load(R,function(i,n){var r=new THREE.MeshStandardMaterial({side:THREE.DoubleSide,vertexColors:THREE.VertexColors}),s=new THREE.BoxHelper(i.scene.children[0]),o=Xt(s.geometry);if(_scle=3/o,i.scene.children[0].scale.x=i.scene.children[0].scale.y=i.scene.children[0].scale.z=_scle,i.scene.children[0].updateMatrix(),zt(i.scene),_offset=s.geometry.boundingBox.getCenter(new THREE.Vector3(0,0,0)).negate(),Lt(i.scene,r),void 0!=z?qt():(l.position.z=20,l.position.y=5,k.position.z=20,k.position.y=5,d.visible=!0),n.images_quality&&(Y=n.images_quality.length||0),e(".get3d_viewer_progress").hide(),Y>0&&!V){if(!t.tools.isDesktop()&&"v3"!=Q)return!0;var c="";"v3"==Q&&(c=t.tools.isDesktop()?"":"?x-oss-process=image/resize,w_1024,limit_0");for(var u=0;u<n.materials.length;u++)n.materials[u].pbrMetallicRoughness.baseColorTexture&&(G[n.materials[u].name]=n.materials[u].pbrMetallicRoughness.baseColorTexture.index);for(var h=new THREE.TextureLoader,p=0;p<n.images_quality.length;p++)!function(t){h.load(C+n.images_quality[t].uri+c,function(i){St++,i.uri=t,U[t]=i,St==Y&&setTimeout(function(){for(var t=0;t<a.children.length;t++){var i=a.children[t];void 0!=G[i.material.name]&&(delete i.material.map.image,i.material.map.image=U[G[i.material.name]].image,i.material.map.needsUpdate=!0)}A||(e(".cameraBtn").addClass("isShow"),J&&e(".cameraBtn").show(),Nt(),$=!1)},1e3)},function(t){void 0==_t.total.urls[t.currentTarget.responseURL]&&(_t.total.size=_t.total.size+(t.total>0?t.total:parseInt(t.currentTarget.getResponseHeader("Content-Length")))),_t.total.urls[t.currentTarget.responseURL]=t.loaded;var i=0;for(var n in _t.total.urls)i+=_t.total.urls[n];if(i>=_t.total.size)e(".get3d_viewer_texture_progress").hide();else{var r=i/_t.total.size*100;e(".get3d_viewer_texture_progress > .progress-bar").width(Math.round(r,2)+"%"),e(".get3d_viewer_texture_progress").show()}},function(t){e(".get3d_viewer_texture_progress").hide()})}(p)}else A||(e(".cameraBtn").addClass("isShow"),J&&e(".cameraBtn").show(),Nt(),$=!1)},Vt,Ut)}(),Nt()}}}).call(e,i("rpTd"),i("7t+N"))},Wcyc:function(t,e,i){e=t.exports=i("FZ+f")(!1),e.push([t.i,"\n.app {\n  height: 100%;\n}\nbody {\n  height: 100%;\n  margin: 0;\n  padding: 0;\n  overflow: hidden;\n}\nhtml {\n  height: 100%;\n}\n",""])},fdI5:function(t,e,i){e=t.exports=i("FZ+f")(!1),e.push([t.i,"",""])},jyak:function(t,e,i){"use strict";function n(t){i("7TnQ"),i("63fr")}Object.defineProperty(e,"__esModule",{value:!0});var r=i("91ZT"),s=function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{ref:"viewer",staticClass:"get3d-model-show viewer",staticStyle:{"border-radius":"8px",width:"100%",height:"100%",overflow:"hidden"}})},o=[],a={render:s,staticRenderFns:o},c=a,l=i("VU/8"),u=n,h=l(r.a,c,!1,u,"data-v-01669369",null);e.default=h.exports},rxKx:function(t,e,i){var n;/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */
!function(r,s,o,a){"use strict";function c(t,e,i){return setTimeout(d(t,i),e)}function l(t,e,i){return!!Array.isArray(t)&&(u(t,i[e],i),!0)}function u(t,e,i){var n;if(t)if(t.forEach)t.forEach(e,i);else if(t.length!==a)for(n=0;n<t.length;)e.call(i,t[n],n,t),n++;else for(n in t)t.hasOwnProperty(n)&&e.call(i,t[n],n,t)}function h(t,e,i){var n="DEPRECATED METHOD: "+e+"\n"+i+" AT \n";return function(){var e=new Error("get-stack-trace"),i=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",s=r.console&&(r.console.warn||r.console.log);return s&&s.call(r.console,n,i),t.apply(this,arguments)}}function p(t,e,i){var n,r=e.prototype;n=t.prototype=Object.create(r),n.constructor=t,n._super=r,i&&ft(n,i)}function d(t,e){return function(){return t.apply(e,arguments)}}function f(t,e){return typeof t==gt?t.apply(e?e[0]||a:a,e):t}function v(t,e){return t===a?e:t}function m(t,e,i){u(T(e),function(e){t.addEventListener(e,i,!1)})}function g(t,e,i){u(T(e),function(e){t.removeEventListener(e,i,!1)})}function w(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function y(t,e){return t.indexOf(e)>-1}function T(t){return t.trim().split(/\s+/g)}function E(t,e,i){if(t.indexOf&&!i)return t.indexOf(e);for(var n=0;n<t.length;){if(i&&t[n][i]==e||!i&&t[n]===e)return n;n++}return-1}function b(t){return Array.prototype.slice.call(t,0)}function x(t,e,i){for(var n=[],r=[],s=0;s<t.length;){var o=e?t[s][e]:t[s];E(r,o)<0&&n.push(t[s]),r[s]=o,s++}return i&&(n=e?n.sort(function(t,i){return t[e]>i[e]}):n.sort()),n}function C(t,e){for(var i,n,r=e[0].toUpperCase()+e.slice(1),s=0;s<vt.length;){if(i=vt[s],(n=i?i+r:e)in t)return n;s++}return a}function R(){return xt++}function S(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||r}function _(t,e){var i=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){f(t.options.enable,[t])&&i.handler(e)},this.init()}function z(t){var e=t.options.inputClass;return new(e||(St?W:_t?Y:Rt?U:q))(t,H)}function H(t,e,i){var n=i.pointers.length,r=i.changedPointers.length,s=e&Ht&&n-r==0,o=e&(Mt|Pt)&&n-r==0;i.isFirst=!!s,i.isFinal=!!o,s&&(t.session={}),i.eventType=e,k(t,i),t.emit("hammer.input",i),t.recognize(i),t.session.prevInput=i}function k(t,e){var i=t.session,n=e.pointers,r=n.length;i.firstInput||(i.firstInput=j(e)),r>1&&!i.firstMultiple?i.firstMultiple=j(e):1===r&&(i.firstMultiple=!1);var s=i.firstInput,o=i.firstMultiple,a=o?o.center:s.center,c=e.center=B(n);e.timeStamp=Tt(),e.deltaTime=e.timeStamp-s.timeStamp,e.angle=D(a,c),e.distance=F(a,c),M(i,e),e.offsetDirection=A(e.deltaX,e.deltaY);var l=I(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=l.x,e.overallVelocityY=l.y,e.overallVelocity=yt(l.x)>yt(l.y)?l.x:l.y,e.scale=o?O(o.pointers,n):1,e.rotation=o?L(o.pointers,n):0,e.maxPointers=i.prevInput?e.pointers.length>i.prevInput.maxPointers?e.pointers.length:i.prevInput.maxPointers:e.pointers.length,P(i,e);var u=t.element;w(e.srcEvent.target,u)&&(u=e.srcEvent.target),e.target=u}function M(t,e){var i=e.center,n=t.offsetDelta||{},r=t.prevDelta||{},s=t.prevInput||{};e.eventType!==Ht&&s.eventType!==Mt||(r=t.prevDelta={x:s.deltaX||0,y:s.deltaY||0},n=t.offsetDelta={x:i.x,y:i.y}),e.deltaX=r.x+(i.x-n.x),e.deltaY=r.y+(i.y-n.y)}function P(t,e){var i,n,r,s,o=t.lastInterval||e,c=e.timeStamp-o.timeStamp;if(e.eventType!=Pt&&(c>zt||o.velocity===a)){var l=e.deltaX-o.deltaX,u=e.deltaY-o.deltaY,h=I(c,l,u);n=h.x,r=h.y,i=yt(h.x)>yt(h.y)?h.x:h.y,s=A(l,u),t.lastInterval=e}else i=o.velocity,n=o.velocityX,r=o.velocityY,s=o.direction;e.velocity=i,e.velocityX=n,e.velocityY=r,e.direction=s}function j(t){for(var e=[],i=0;i<t.pointers.length;)e[i]={clientX:wt(t.pointers[i].clientX),clientY:wt(t.pointers[i].clientY)},i++;return{timeStamp:Tt(),pointers:e,center:B(e),deltaX:t.deltaX,deltaY:t.deltaY}}function B(t){var e=t.length;if(1===e)return{x:wt(t[0].clientX),y:wt(t[0].clientY)};for(var i=0,n=0,r=0;r<e;)i+=t[r].clientX,n+=t[r].clientY,r++;return{x:wt(i/e),y:wt(n/e)}}function I(t,e,i){return{x:e/t||0,y:i/t||0}}function A(t,e){return t===e?jt:yt(t)>=yt(e)?t<0?Bt:It:e<0?At:Ft}function F(t,e,i){i||(i=qt);var n=e[i[0]]-t[i[0]],r=e[i[1]]-t[i[1]];return Math.sqrt(n*n+r*r)}function D(t,e,i){i||(i=qt);var n=e[i[0]]-t[i[0]],r=e[i[1]]-t[i[1]];return 180*Math.atan2(r,n)/Math.PI}function L(t,e){return D(e[1],e[0],Wt)+D(t[1],t[0],Wt)}function O(t,e){return F(e[0],e[1],Wt)/F(t[0],t[1],Wt)}function q(){this.evEl=Xt,this.evWin=Yt,this.pressed=!1,_.apply(this,arguments)}function W(){this.evEl=Gt,this.evWin=$t,_.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function N(){this.evTarget=Kt,this.evWin=Jt,this.started=!1,_.apply(this,arguments)}function X(t,e){var i=b(t.touches),n=b(t.changedTouches);return e&(Mt|Pt)&&(i=x(i.concat(n),"identifier",!0)),[i,n]}function Y(){this.evTarget=te,this.targetIds={},_.apply(this,arguments)}function V(t,e){var i=b(t.touches),n=this.targetIds;if(e&(Ht|kt)&&1===i.length)return n[i[0].identifier]=!0,[i,i];var r,s,o=b(t.changedTouches),a=[],c=this.target;if(s=i.filter(function(t){return w(t.target,c)}),e===Ht)for(r=0;r<s.length;)n[s[r].identifier]=!0,r++;for(r=0;r<o.length;)n[o[r].identifier]&&a.push(o[r]),e&(Mt|Pt)&&delete n[o[r].identifier],r++;return a.length?[x(s.concat(a),"identifier",!0),a]:void 0}function U(){_.apply(this,arguments);var t=d(this.handler,this);this.touch=new Y(this.manager,t),this.mouse=new q(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function G(t,e){t&Ht?(this.primaryTouch=e.changedPointers[0].identifier,$.call(this,e)):t&(Mt|Pt)&&$.call(this,e)}function $(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var i={x:e.clientX,y:e.clientY};this.lastTouches.push(i);var n=this.lastTouches,r=function(){var t=n.indexOf(i);t>-1&&n.splice(t,1)};setTimeout(r,ee)}}function Z(t){for(var e=t.srcEvent.clientX,i=t.srcEvent.clientY,n=0;n<this.lastTouches.length;n++){var r=this.lastTouches[n],s=Math.abs(e-r.x),o=Math.abs(i-r.y);if(s<=ie&&o<=ie)return!0}return!1}function K(t,e){this.manager=t,this.set(e)}function J(t){if(y(t,ae))return ae;var e=y(t,ce),i=y(t,le);return e&&i?ae:e||i?e?ce:le:y(t,oe)?oe:se}function Q(t){this.options=ft({},this.defaults,t||{}),this.id=R(),this.manager=null,this.options.enable=v(this.options.enable,!0),this.state=he,this.simultaneous={},this.requireFail=[]}function tt(t){return t&me?"cancel":t&fe?"end":t&de?"move":t&pe?"start":""}function et(t){return t==Ft?"down":t==At?"up":t==Bt?"left":t==It?"right":""}function it(t,e){var i=e.manager;return i?i.get(t):t}function nt(){Q.apply(this,arguments)}function rt(){nt.apply(this,arguments),this.pX=null,this.pY=null}function st(){nt.apply(this,arguments)}function ot(){Q.apply(this,arguments),this._timer=null,this._input=null}function at(){nt.apply(this,arguments)}function ct(){nt.apply(this,arguments)}function lt(){Q.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function ut(t,e){return e=e||{},e.recognizers=v(e.recognizers,ut.defaults.preset),new ht(t,e)}function ht(t,e){this.options=ft({},ut.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=z(this),this.touchAction=new K(this,this.options.touchAction),pt(this,!0),u(this.options.recognizers,function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])},this)}function pt(t,e){var i=t.element;if(i.style){var n;u(t.options.cssProps,function(r,s){n=C(i.style,s),e?(t.oldCssProps[n]=i.style[n],i.style[n]=r):i.style[n]=t.oldCssProps[n]||""}),e||(t.oldCssProps={})}}function dt(t,e){var i=s.createEvent("Event");i.initEvent(t,!0,!0),i.gesture=e,e.target.dispatchEvent(i)}var ft,vt=["","webkit","Moz","MS","ms","o"],mt=s.createElement("div"),gt="function",wt=Math.round,yt=Math.abs,Tt=Date.now;ft="function"!=typeof Object.assign?function(t){if(t===a||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),i=1;i<arguments.length;i++){var n=arguments[i];if(n!==a&&null!==n)for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r])}return e}:Object.assign;var Et=h(function(t,e,i){for(var n=Object.keys(e),r=0;r<n.length;)(!i||i&&t[n[r]]===a)&&(t[n[r]]=e[n[r]]),r++;return t},"extend","Use `assign`."),bt=h(function(t,e){return Et(t,e,!0)},"merge","Use `assign`."),xt=1,Ct=/mobile|tablet|ip(ad|hone|od)|android/i,Rt="ontouchstart"in r,St=C(r,"PointerEvent")!==a,_t=Rt&&Ct.test(navigator.userAgent),zt=25,Ht=1,kt=2,Mt=4,Pt=8,jt=1,Bt=2,It=4,At=8,Ft=16,Dt=Bt|It,Lt=At|Ft,Ot=Dt|Lt,qt=["x","y"],Wt=["clientX","clientY"];_.prototype={handler:function(){},init:function(){this.evEl&&m(this.element,this.evEl,this.domHandler),this.evTarget&&m(this.target,this.evTarget,this.domHandler),this.evWin&&m(S(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&g(this.element,this.evEl,this.domHandler),this.evTarget&&g(this.target,this.evTarget,this.domHandler),this.evWin&&g(S(this.element),this.evWin,this.domHandler)}};var Nt={mousedown:Ht,mousemove:kt,mouseup:Mt},Xt="mousedown",Yt="mousemove mouseup";p(q,_,{handler:function(t){var e=Nt[t.type];e&Ht&&0===t.button&&(this.pressed=!0),e&kt&&1!==t.which&&(e=Mt),this.pressed&&(e&Mt&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:"mouse",srcEvent:t}))}});var Vt={pointerdown:Ht,pointermove:kt,pointerup:Mt,pointercancel:Pt,pointerout:Pt},Ut={2:"touch",3:"pen",4:"mouse",5:"kinect"},Gt="pointerdown",$t="pointermove pointerup pointercancel";r.MSPointerEvent&&!r.PointerEvent&&(Gt="MSPointerDown",$t="MSPointerMove MSPointerUp MSPointerCancel"),p(W,_,{handler:function(t){var e=this.store,i=!1,n=t.type.toLowerCase().replace("ms",""),r=Vt[n],s=Ut[t.pointerType]||t.pointerType,o="touch"==s,a=E(e,t.pointerId,"pointerId");r&Ht&&(0===t.button||o)?a<0&&(e.push(t),a=e.length-1):r&(Mt|Pt)&&(i=!0),a<0||(e[a]=t,this.callback(this.manager,r,{pointers:e,changedPointers:[t],pointerType:s,srcEvent:t}),i&&e.splice(a,1))}});var Zt={touchstart:Ht,touchmove:kt,touchend:Mt,touchcancel:Pt},Kt="touchstart",Jt="touchstart touchmove touchend touchcancel";p(N,_,{handler:function(t){var e=Zt[t.type];if(e===Ht&&(this.started=!0),this.started){var i=X.call(this,t,e);e&(Mt|Pt)&&i[0].length-i[1].length==0&&(this.started=!1),this.callback(this.manager,e,{pointers:i[0],changedPointers:i[1],pointerType:"touch",srcEvent:t})}}});var Qt={touchstart:Ht,touchmove:kt,touchend:Mt,touchcancel:Pt},te="touchstart touchmove touchend touchcancel";p(Y,_,{handler:function(t){var e=Qt[t.type],i=V.call(this,t,e);i&&this.callback(this.manager,e,{pointers:i[0],changedPointers:i[1],pointerType:"touch",srcEvent:t})}});var ee=2500,ie=25;p(U,_,{handler:function(t,e,i){var n="touch"==i.pointerType,r="mouse"==i.pointerType;if(!(r&&i.sourceCapabilities&&i.sourceCapabilities.firesTouchEvents)){if(n)G.call(this,e,i);else if(r&&Z.call(this,i))return;this.callback(t,e,i)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var ne=C(mt.style,"touchAction"),re=ne!==a,se="auto",oe="manipulation",ae="none",ce="pan-x",le="pan-y",ue=function(){if(!re)return!1;var t={},e=r.CSS&&r.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(i){t[i]=!e||r.CSS.supports("touch-action",i)}),t}();K.prototype={set:function(t){"compute"==t&&(t=this.compute()),re&&this.manager.element.style&&ue[t]&&(this.manager.element.style[ne]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return u(this.manager.recognizers,function(e){f(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))}),J(t.join(" "))},preventDefaults:function(t){var e=t.srcEvent,i=t.offsetDirection;if(this.manager.session.prevented)return void e.preventDefault();var n=this.actions,r=y(n,ae)&&!ue[ae],s=y(n,le)&&!ue[le],o=y(n,ce)&&!ue[ce];if(r){var a=1===t.pointers.length,c=t.distance<2,l=t.deltaTime<250;if(a&&c&&l)return}return o&&s?void 0:r||s&&i&Dt||o&&i&Lt?this.preventSrc(e):void 0},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var he=1,pe=2,de=4,fe=8,ve=fe,me=16;Q.prototype={defaults:{},set:function(t){return ft(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(l(t,"recognizeWith",this))return this;var e=this.simultaneous;return t=it(t,this),e[t.id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return l(t,"dropRecognizeWith",this)?this:(t=it(t,this),delete this.simultaneous[t.id],this)},requireFailure:function(t){if(l(t,"requireFailure",this))return this;var e=this.requireFail;return t=it(t,this),-1===E(e,t)&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(l(t,"dropRequireFailure",this))return this;t=it(t,this);var e=E(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){function e(e){i.manager.emit(e,t)}var i=this,n=this.state;n<fe&&e(i.options.event+tt(n)),e(i.options.event),t.additionalEvent&&e(t.additionalEvent),n>=fe&&e(i.options.event+tt(n))},tryEmit:function(t){if(this.canEmit())return this.emit(t);this.state=32},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(this.requireFail[t].state&(32|he)))return!1;t++}return!0},recognize:function(t){var e=ft({},t);if(!f(this.options.enable,[this,e]))return this.reset(),void(this.state=32);this.state&(ve|me|32)&&(this.state=he),this.state=this.process(e),this.state&(pe|de|fe|me)&&this.tryEmit(e)},process:function(t){},getTouchAction:function(){},reset:function(){}},p(nt,Q,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,i=t.eventType,n=e&(pe|de),r=this.attrTest(t);return n&&(i&Pt||!r)?e|me:n||r?i&Mt?e|fe:e&pe?e|de:pe:32}}),p(rt,nt,{defaults:{event:"pan",threshold:10,pointers:1,direction:Ot},getTouchAction:function(){var t=this.options.direction,e=[];return t&Dt&&e.push(le),t&Lt&&e.push(ce),e},directionTest:function(t){var e=this.options,i=!0,n=t.distance,r=t.direction,s=t.deltaX,o=t.deltaY;return r&e.direction||(e.direction&Dt?(r=0===s?jt:s<0?Bt:It,i=s!=this.pX,n=Math.abs(t.deltaX)):(r=0===o?jt:o<0?At:Ft,i=o!=this.pY,n=Math.abs(t.deltaY))),t.direction=r,i&&n>e.threshold&&r&e.direction},attrTest:function(t){return nt.prototype.attrTest.call(this,t)&&(this.state&pe||!(this.state&pe)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=et(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),p(st,nt,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[ae]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||this.state&pe)},emit:function(t){if(1!==t.scale){var e=t.scale<1?"in":"out";t.additionalEvent=this.options.event+e}this._super.emit.call(this,t)}}),p(ot,Q,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[se]},process:function(t){var e=this.options,i=t.pointers.length===e.pointers,n=t.distance<e.threshold,r=t.deltaTime>e.time;if(this._input=t,!n||!i||t.eventType&(Mt|Pt)&&!r)this.reset();else if(t.eventType&Ht)this.reset(),this._timer=c(function(){this.state=ve,this.tryEmit()},e.time,this);else if(t.eventType&Mt)return ve;return 32},reset:function(){clearTimeout(this._timer)},emit:function(t){this.state===ve&&(t&&t.eventType&Mt?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=Tt(),this.manager.emit(this.options.event,this._input)))}}),p(at,nt,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[ae]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||this.state&pe)}}),p(ct,nt,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Dt|Lt,pointers:1},getTouchAction:function(){return rt.prototype.getTouchAction.call(this)},attrTest:function(t){var e,i=this.options.direction;return i&(Dt|Lt)?e=t.overallVelocity:i&Dt?e=t.overallVelocityX:i&Lt&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&i&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&yt(e)>this.options.velocity&&t.eventType&Mt},emit:function(t){var e=et(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),p(lt,Q,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[oe]},process:function(t){var e=this.options,i=t.pointers.length===e.pointers,n=t.distance<e.threshold,r=t.deltaTime<e.time;if(this.reset(),t.eventType&Ht&&0===this.count)return this.failTimeout();if(n&&r&&i){if(t.eventType!=Mt)return this.failTimeout();var s=!this.pTime||t.timeStamp-this.pTime<e.interval,o=!this.pCenter||F(this.pCenter,t.center)<e.posThreshold;this.pTime=t.timeStamp,this.pCenter=t.center,o&&s?this.count+=1:this.count=1,this._input=t;if(0===this.count%e.taps)return this.hasRequireFailures()?(this._timer=c(function(){this.state=ve,this.tryEmit()},e.interval,this),pe):ve}return 32},failTimeout:function(){return this._timer=c(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==ve&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),ut.VERSION="2.0.7",ut.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[at,{enable:!1}],[st,{enable:!1},["rotate"]],[ct,{direction:Dt}],[rt,{direction:Dt},["swipe"]],[lt],[lt,{event:"doubletap",taps:2},["tap"]],[ot]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};ht.prototype={set:function(t){return ft(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var e=this.session;if(!e.stopped){this.touchAction.preventDefaults(t);var i,n=this.recognizers,r=e.curRecognizer;(!r||r&&r.state&ve)&&(r=e.curRecognizer=null);for(var s=0;s<n.length;)i=n[s],2===e.stopped||r&&i!=r&&!i.canRecognizeWith(r)?i.reset():i.recognize(t),!r&&i.state&(pe|de|fe)&&(r=e.curRecognizer=i),s++}},get:function(t){if(t instanceof Q)return t;for(var e=this.recognizers,i=0;i<e.length;i++)if(e[i].options.event==t)return e[i];return null},add:function(t){if(l(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(l(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,i=E(e,t);-1!==i&&(e.splice(i,1),this.touchAction.update())}return this},on:function(t,e){if(t!==a&&e!==a){var i=this.handlers;return u(T(t),function(t){i[t]=i[t]||[],i[t].push(e)}),this}},off:function(t,e){if(t!==a){var i=this.handlers;return u(T(t),function(t){e?i[t]&&i[t].splice(E(i[t],e),1):delete i[t]}),this}},emit:function(t,e){this.options.domEvents&&dt(t,e);var i=this.handlers[t]&&this.handlers[t].slice();if(i&&i.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var n=0;n<i.length;)i[n](e),n++}},destroy:function(){this.element&&pt(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},ft(ut,{INPUT_START:Ht,INPUT_MOVE:kt,INPUT_END:Mt,INPUT_CANCEL:Pt,STATE_POSSIBLE:he,STATE_BEGAN:pe,STATE_CHANGED:de,STATE_ENDED:fe,STATE_RECOGNIZED:ve,STATE_CANCELLED:me,STATE_FAILED:32,DIRECTION_NONE:jt,DIRECTION_LEFT:Bt,DIRECTION_RIGHT:It,DIRECTION_UP:At,DIRECTION_DOWN:Ft,DIRECTION_HORIZONTAL:Dt,DIRECTION_VERTICAL:Lt,DIRECTION_ALL:Ot,Manager:ht,Input:_,TouchAction:K,TouchInput:Y,MouseInput:q,PointerEventInput:W,TouchMouseInput:U,SingleTouchInput:N,Recognizer:Q,AttrRecognizer:nt,Tap:lt,Pan:rt,Swipe:ct,Pinch:st,Rotate:at,Press:ot,on:m,off:g,each:u,merge:bt,extend:Et,assign:ft,inherit:p,bindFn:d,prefixed:C}),(void 0!==r?r:"undefined"!=typeof self?self:{}).Hammer=ut,(n=function(){return ut}.call(e,i,e,t))!==a&&(t.exports=n)}(window,document)}});